---
layout: post
title: Understanding GraphQL Query Syntax
tags: [GraphQL]
color: rgb(250, 154, 133)
feature-img: "assets/img/pexels/design-art/down-the-street-through-Osaka.png"
thumbnail: "assets/img/pexels/design-art/down-the-street-through-Osaka.png"
author: QubitPi
excerpt_separator: <!--more-->
---

<!--more-->

* TOC
{:toc}

Many years of software engineering experience told me that software documentation is never a good way to learn a new
technology unless it is written by some strong-marketing-minded engineer. I believe the best way to learn a new tech is
to dive into its source code and have its documentation as an aid that facilitates your understanding. In this post I am
going to show you how to master **GraphQL query language** by looking at its source file.

**Note that you will need to have solid understanding of ANTLR4 before moving on**.

GraphQL query language is defined using ANTLR. This means understanding its grammar is essentially the same thing as
unserstanding its ANTLR definition. We will understnd GraphQL query language by reading its ANTLR grammar. Leaarning it
this way will allow to transform GraphQL query to internal query format adapted in your own data system.

## ANTLR Basics

ANTLR is written in Java. Since we will be demonstrating ANTLR through command line, installing ANTLR itself is simply a
matter of downloading the latest jar and storing it somewhere appropriate. The jar contains all dependencies necessary
to run the ANTLR tool and the runtime library needed to compile and execute programs generated by ANTLR.

We will being using version 4.8 of ANTLR. The `jar` of it is available at
[https://www.antlr.org/download/antlr-4.8-complete.jar](https://www.antlr.org/download/antlr-4.8-complete.jar)

Here is simple grammer that recoginizes phrases like hello jack and hello world:

![antlr-hello.png not loaded property]({{ "/assets/img/antlr-hello.png" | relative_url}})

To keep things tidy, let's put this grammar file `Hello.g4` in its own directory, such as `hello`. We put `\hello` in
the same directory hosting the `antlr-4.8-complete.jar`

Then we can run ANTLR on it and compile the results:

![antlr-run-hello.png not loaded property]({{ "/assets/img/antlr-run-hello.png" | relative_url}})

Running the ANTLR tool on `Hello.g4` generates an executable recognizer embodied by `HelloParser.java` and
`HelloLexer.java`, but we don't have a main program to trigger language recognition. Fortunately, ANTLR provides a
flexible testing tool in the runtime library called `TestRig`. It can display lots of information about how a recognizer
matches input from a file or standard input. `TestRig` uses Java reflection to invoke compile recognizers.

The test rig takes a grammar name, a starting rule name kind of like a `main()` method, and various options that dicate
the output we want.

Let's say we'd like to print the tokens created during recognition. Tokens are vocabulary symbols like keyword `hello`
and identifier `jack`. To test the grammar, start up the test rig as follows:

![antlr-run.png not loaded property]({{ "/assets/img/antlr-run.png" | relative_url}})

